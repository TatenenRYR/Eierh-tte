<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Wizard Demo</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

<div id="wizard" class="bg-white w-full max-w-md p-6 rounded-xl shadow-lg">
  <!-- Fortschrittsbalken -->
  <div class="w-full bg-gray-200 rounded-full h-2 mb-6">
    <div id="progress-bar" class="bg-green-500 h-2 rounded-full" style="width:0%"></div>
  </div>

  <!-- Step-Inhalt -->
  <div id="step-content" class="space-y-4"></div>

  <!-- Navigation -->
  <div class="flex justify-between mt-6">
    <button id="prev-btn"
      class="px-4 py-2 bg-gray-300 rounded disabled:opacity-40">Zurück</button>
    <button id="next-btn"
      class="px-4 py-2 bg-green-600 text-white rounded">Weiter</button>
  </div>
</div>

<script>
const steps = [
  {
    title: "Name der Hütte",
    render: data => `
      <input id="name" value="${data.name||''}"
        class="w-full border p-2 rounded"
        placeholder="z.B. Almhütte" />
    `
  },
  {
    title: "Sitzplätze vorhanden?",
    render: data => `
      <div class="grid grid-cols-2 gap-2">
        ${['Ja','Nein'].map(opt =>
          `<button data-value="${opt}"
             class="option px-4 py-2 border rounded
                    ${data.sitz===opt?'bg-green-100 border-green-500':''}">
             ${opt}
           </button>`).join('')}
      </div>`
  },
  {
    title: "Extras",
    render: data => `
      <textarea id="extras" rows="3"
        class="w-full border p-2 rounded"
        placeholder="z.B. Getränke, Werkzeug">${data.extras||''}</textarea>
    `
  }
];

let current = 0;
const formData = {};  // hier sammeln wir die Antworten

function render() {
  const step = steps[current];
  document.getElementById('step-content').innerHTML =
    `<h2 class="text-xl font-bold mb-2">${step.title}</h2>${step.render(formData)}`;

  // Fortschrittsbalken aktualisieren
  document.getElementById('progress-bar').style.width =
    ((current+1)/steps.length*100) + "%";

  // Buttons anpassen
  document.getElementById('prev-btn').disabled = current === 0;
  document.getElementById('next-btn').textContent =
    current === steps.length-1 ? "Fertig" : "Weiter";

  // Klicks auf Optionsbuttons abfangen
  document.querySelectorAll('.option').forEach(btn=>{
    btn.addEventListener('click', e=>{
      formData.sitz = e.target.dataset.value;
      render();
    });
  });
}

function nextStep() {
  // Werte des aktuellen Steps lesen
  if (current===0) formData.name = document.getElementById('name').value.trim();
  if (current===2) formData.extras = document.getElementById('extras').value.trim();

  if (current < steps.length-1) {
    current++;
    render();
  } else {
    // >>> hier könntest du Firestore saveField() aufrufen <<<
    alert("Fertig! Gespeicherte Daten:\n" + JSON.stringify(formData,null,2));
  }
}

document.getElementById('next-btn').addEventListener('click', nextStep);
document.getElementById('prev-btn').addEventListener('click', () => {
  if (current>0) { current--; render(); }
});

render();
</script>
</body>
</html>
