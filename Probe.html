<!DOCTYPE html><html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HÃ¼tten Assistent â€“ Neue OberflÃ¤che</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    body { font-family: sans-serif; }
    .sidebar-btn:hover { background-color: #10b981; color:white; }
    .card-option { transition: transform 0.2s, box-shadow 0.2s; }
    .card-option:hover { transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
  </style>
</head>
<body class="bg-gray-100">
<div class="flex min-h-screen">  <!-- Sidebar (mobile toggle) -->  <div id="sidebar" class="fixed md:static inset-y-0 left-0 w-60 bg-white border-r p-4 flex flex-col gap-3 transform -translate-x-full md:translate-x-0 transition-transform z-50">
    <div class="text-2xl font-bold text-green-700 mb-6">ğŸŒ¿ Assistent</div>
    <button class="sidebar-btn flex items-center gap-2 p-2 rounded" onclick="showMyEntries()">ğŸ“‹ Meine Eintragungen</button>
    <button class="sidebar-btn flex items-center gap-2 p-2 rounded" onclick="startNewEntry()">â• Neue Eintragung</button>
    <button class="sidebar-btn flex items-center gap-2 p-2 rounded" onclick="openSupport()">ğŸ’¬ Support</button>
    <div class="mt-auto text-xs text-gray-400">v0.2 Prototype</div>
  </div>  <!-- Main Content -->  <div class="flex-1 flex flex-col">
    <!-- Topbar for mobile -->
    <div class="md:hidden flex items-center justify-between bg-white border-b p-3">
      <div class="font-bold text-green-700">Assistent</div>
      <button onclick="toggleSidebar()" class="p-2 bg-green-600 text-white rounded">â˜°</button>
    </div><!-- Progressbar -->
<div class="w-full h-2 bg-gray-200">
  <div id="progress" class="h-2 bg-green-500 w-0 transition-all"></div>
</div>

<!-- Question Area -->
<div id="question-area" class="flex-1 flex flex-col items-center justify-center p-6 overflow-y-auto">
  <!-- Dynamic question cards will be rendered here -->
</div>

<!-- Navigation Buttons -->
<div class="flex justify-between p-4 border-t bg-white">
  <button id="backBtn" class="px-4 py-2 bg-gray-200 rounded" onclick="prevStep()">â¬…ï¸ ZurÃ¼ck</button>
  <button id="nextBtn" class="px-4 py-2 bg-green-600 text-white rounded" onclick="nextStep()">Weiter â¡ï¸</button>
</div>

  </div>
</div><script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyAu39z49KEJy9zso-etFIScmaFnWw8vhro",
  authDomain: "eierhuettentour.firebaseapp.com",
  projectId: "eierhuettentour",
  storageBucket: "eierhuettentour.appspot.com",
  messagingSenderId: "348272135205",
  appId: "1:348272135205:web:f39a7d26d927fbf28dc3cc"
};
const app = firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let currentUser = { uid: "demo" }; // TODO: Google-Login einbauen
let editingData = {};
let step = 0;
const totalSteps = 9; // Datenschutz + Typ + 7 Fragen

function saveField(field, value) {
  editingData[field] = value;
  editingData.step = step;
  console.log("ğŸ’¾ gespeichert:", field, value);
}

function updateProgress() {
  const percent = ((step) / totalSteps) * 100;
  document.getElementById("progress").style.width = percent + "%";
}

function renderQuestion() {
  const qa = document.getElementById("question-area");
  qa.innerHTML = "";

  switch(step) {
    case 0:
      qa.innerHTML = `
        <div class="bg-white p-6 rounded-xl shadow max-w-lg w-full">
          <h2 class="text-xl font-bold mb-4">ğŸ›¡ï¸ DatenschutzerklÃ¤rung</h2>
          <p class="mb-4">Bitte bestÃ¤tige, dass du die <a href='/datenschutz.html' target='_blank' class='text-blue-600 underline'>DatenschutzerklÃ¤rung</a> akzeptierst.</p>
          <label class="flex items-center gap-2">
            <input type="checkbox" id="dsCheck" /> Ich akzeptiere
          </label>
        </div>`;
      break;

    case 1:
      qa.innerHTML = `<h2 class='text-xl font-bold mb-6'>Was mÃ¶chtest du eintragen?</h2>`;
      const opts = ["ğŸ¥š EierhÃ¼tte","ğŸª Hofladen","ğŸ¤– SelbstbedienungshÃ¤uschen","ğŸ› Spielplatz","ğŸŒ„ Abenteuerhof"];
      const wrap = document.createElement("div");
      wrap.className = "grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-2xl";
      opts.forEach(opt => {
        const card = document.createElement("div");
        card.className = "card-option bg-white p-6 rounded-xl shadow cursor-pointer text-center";
        card.innerHTML = `<div class='text-3xl mb-2'>${opt.split(" ")[0]}</div><div class='font-semibold'>${opt.substring(2)}</div>`;
        card.onclick = () => { saveField("typ", opt.substring(2)); nextStep(); };
        wrap.appendChild(card);
      });
      qa.appendChild(wrap);
      break;

    case 2:
      qa.innerHTML = `
        <div class="bg-white p-6 rounded-xl shadow max-w-lg w-full">
          <h2 class="text-xl font-bold mb-4">ğŸ·ï¸ Wie heiÃŸt deine HÃ¼tte?</h2>
          <input id="nameInput" type="text" class="w-full border p-2 rounded" placeholder="Name eingeben..." />
        </div>`;
      break;

    case 3:
      qa.innerHTML = `
        <div class="bg-white p-6 rounded-xl shadow max-w-lg w-full">
          <h2 class="text-xl font-bold mb-4">ğŸª‘ Hat deine HÃ¼tte SitzplÃ¤tze?</h2>
          <div class="flex gap-4">
            <button class="flex-1 bg-green-100 p-4 rounded" onclick="saveField('sitzplaetze','Ja'); nextStep();">âœ… Ja</button>
            <button class="flex-1 bg-red-100 p-4 rounded" onclick="saveField('sitzplaetze','Nein'); nextStep();">âŒ Nein</button>
          </div>
        </div>`;
      break;

    case 4:
      qa.innerHTML = `
        <div class="bg-white p-6 rounded-xl shadow max-w-lg w-full">
          <h2 class="text-xl font-bold mb-4">ğŸ”Œ Gibt es Strom?</h2>
          <div class="flex gap-4">
            <button class="flex-1 bg-green-100 p-4 rounded" onclick="saveField('strom','Ja'); nextStep();">âš¡ Ja</button>
            <button class="flex-1 bg-red-100 p-4 rounded" onclick="saveField('strom','Nein'); nextStep();">âŒ Nein</button>
          </div>
        </div>`;
      break;

    case 5:
      qa.innerHTML = `
        <div class="bg-white p-6 rounded-xl shadow max-w-lg w-full">
          <h2 class="text-xl font-bold mb-4">âœ¨ Extras?</h2>
          <input id="extrasInput" type="text" class="w-full border p-2 rounded" placeholder="z.B. GetrÃ¤nke, KÃ¼hlschrank" />
        </div>`;
      break;

    case 6:
      qa.innerHTML = `
        <div class="bg-white p-6 rounded-xl shadow max-w-lg w-full">
          <h2 class="text-xl font-bold mb-4">ğŸ¾ Welche Tiere gibt es?</h2>
          <div class="grid grid-cols-3 gap-2" id="tiereGrid"></div>
        </div>`;
      const tiere = ["ğŸ Ziege","ğŸ„ Kuh","ğŸ“ Huhn","ğŸ• Hund","ğŸ‡ Hase","ğŸš« Keine"];
      const grid = qa.querySelector("#tiereGrid");
      editingData.tiere = editingData.tiere || [];
      tiere.forEach(t => {
        const btn = document.createElement("button");
        btn.className = "p-2 border rounded";
        btn.textContent = t;
        btn.onclick = () => {
          if (t === "ğŸš« Keine") editingData.tiere = [];
          else {
            if (!editingData.tiere.includes(t)) editingData.tiere.push(t);
          }
          saveField("tiere", editingData.tiere);
        };
        grid.appendChild(btn);
      });
      break;

    case 7:
      qa.innerHTML = `
        <div class="bg-white p-6 rounded-xl shadow max-w-lg w-full">
          <h2 class="text-xl font-bold mb-4">ğŸ“ Bitte beschreibe deine HÃ¼tte kurz</h2>
          <textarea id="descInput" class="w-full border p-2 rounded" rows="3"></textarea></div>`;
  break;

case 8:
  qa.innerHTML = `
    <div class="bg-white p-6 rounded-xl shadow max-w-lg w-full">
      <h2 class="text-xl font-bold mb-4">ğŸ·ï¸ SchlagwÃ¶rter</h2>
      <input id="tagsInput" type="text" class="w-full border p-2 rounded" placeholder="z.B. FrÃ¼hstÃ¼ck, GetrÃ¤nke, schattig" />
    </div>`;
  break;

case 9:
  qa.innerHTML = `<div class='bg-white p-6 rounded-xl shadow'>âœ… Fertig! Hier kÃ¶nnte eine Zusammenfassung mit Karte und Einreichen-Button folgen.</div>`;
  break;

}

updateProgress(); }

function nextStep() { if (step === 0) { if (!document.getElementById("dsCheck").checked) { alert("Bitte DatenschutzerklÃ¤rung akzeptieren"); return; } saveField("datenschutz", true); } if (step === 2) { const val = document.getElementById("nameInput").value.trim(); if (!val) { alert("Bitte Namen eingeben"); return; } saveField("name", val); } if (step === 5) { const val = document.getElementById("extrasInput").value.trim(); saveField("extras", val); } if (step === 7) { const val = document.getElementById("descInput").value.trim(); saveField("beschreibung", val); } if (step === 8) { const tags = document.getElementById("tagsInput").value.split(",").map(t=>t.trim()).filter(t=>t); saveField("tags", tags); } step++; renderQuestion(); }

function prevStep() { if (step > 0) step--; renderQuestion(); }

function toggleSidebar(){ const sb = document.getElementById("sidebar"); sb.classList.toggle("-translate-x-full"); }

// Sidebar functions function showMyEntries(){ alert("ğŸ“‹ Meine Eintragungen (Demo)"); } function startNewEntry(){ step=0; editingData={}; renderQuestion(); toggleSidebar(); } function openSupport(){ alert("ğŸ’¬ Support anfragen (Demo)"); toggleSidebar(); }

// Init renderQuestion(); </script>

</body>
</html>
