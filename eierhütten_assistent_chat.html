<!DOCTYPE html><html lang="de">
<head>
  <meta charset="UTF-8">
  <title>EierhÃ¼tten-Chat</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; margin: 0; padding: 0; }
    #chat { max-width: 600px; margin: auto; padding: 20px; background: white; min-height: 90vh; overflow-y: auto; border-radius: 10px; margin-top: 20px; }
    .message { margin: 10px 0; }
    .bot { color: #333; background: #e0f7fa; padding: 10px; border-radius: 10px; display: inline-block; max-width: 90%; }
    .user { text-align: right; }
    .user .text { background: #c8e6c9; display: inline-block; padding: 10px; border-radius: 10px; max-width: 90%; }
    #inputArea { position: fixed; bottom: 0; left: 0; right: 0; padding: 10px; background: #fff; border-top: 1px solid #ccc; }
    input[type=text] { width: 90%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
    button.choice { margin: 5px 5px 0 0; padding: 6px 12px; border: none; background: #26a69a; color: white; border-radius: 5px; cursor: pointer; }
  </style>
</head>
<body>
  <div id="chat"></div>
  <div id="inputArea">
    <input type="text" id="userInput" placeholder="Schreib, was du machen mÃ¶chtest...">
  </div>  <script>
    const chat = document.getElementById('chat');
    const userInput = document.getElementById('userInput');

    function addMessage(text, sender = 'bot') {
      const msg = document.createElement('div');
      msg.className = 'message ' + sender;
      msg.innerHTML = sender === 'user' ? `<div class="text">${text}</div>` : `<div class="bot">${text}</div>`;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    function showButtons() {
      const buttons = [
        { text: 'ğŸ†• Neue HÃ¼tte einreichen', intent: 'neu' },
        { text: 'âœï¸ HÃ¼tte bearbeiten', intent: 'bearbeiten' },
        { text: 'ğŸ“‹ Meine HÃ¼tten ansehen', intent: 'meine' },
        { text: 'â“ Hilfe', intent: 'hilfe' }
      ];
      const wrapper = document.createElement('div');
      wrapper.className = 'message bot';
      buttons.forEach(btn => {
        const el = document.createElement('button');
        el.className = 'choice';
        el.innerText = btn.text;
        el.onclick = () => processIntent(btn.intent);
        wrapper.appendChild(el);
      });
      chat.appendChild(wrapper);
    }

    function processIntent(intent) {
      if (intent === 'neu') {
        addMessage('ğŸš€ Alles klar! Ich helfe dir, eine neue HÃ¼tte einzureichen.');
        // startDialog(); // Hier wird das Formular gestartet
      } else if (intent === 'bearbeiten') {
        addMessage('âœï¸ WÃ¤hle eine deiner eingereichten HÃ¼tten zum Bearbeiten.');
        // loadUserHuts(true);
      } else if (intent === 'meine') {
        addMessage('ğŸ“‹ Ich zeige dir deine eingereichten HÃ¼tten...');
        // loadUserHuts(false);
      } else if (intent === 'hilfe') {
        addMessage(`ğŸ§  Du kannst mir einfach schreiben, was du vorhast, z.â€¯B.:<br>
        â€“ Ich mÃ¶chte eine neue HÃ¼tte einreichen<br>
        â€“ Ich will eine bestehende HÃ¼tte bearbeiten<br>
        â€“ Zeig mir meine HÃ¼tten`);
        showButtons();
      }
    }

    function handleNaturalLanguage(text) {
      const input = text.toLowerCase();
      if (input.includes('neu') || input.includes('einreichen')) {
        processIntent('neu');
      } else if (input.includes('bearbeiten')) {
        processIntent('bearbeiten');
      } else if (input.includes('meine') || input.includes('anzeigen')) {
        processIntent('meine');
      } else if (input.includes('hilfe') || input.includes('was')) {
        processIntent('hilfe');
      } else {
        addMessage('â“ Ich bin mir nicht sicher, was du meinst. Hier sind einige Optionen:');
        showButtons();
      }
    }

    userInput.addEventListener('keydown', e => {
      if (e.key === 'Enter' && userInput.value.trim()) {
        const val = userInput.value.trim();
        addMessage(val, 'user');
        handleNaturalLanguage(val);
        userInput.value = '';
      }
    });

    // Initiale BegrÃ¼ÃŸung
    window.onload = () => {
      addMessage('ğŸ‘‹ Hallo! Ich bin dein EierhÃ¼tten-Assistent. Was mÃ¶chtest du tun?');
      showButtons();
    };
  </script></body>
</html>
