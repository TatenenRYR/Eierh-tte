<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Putzliste – Darkmode</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0f172a;
      color: #f1f5f9;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #1e293b;
      color: #22c55e;
      padding: 1rem;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
    }
    main {
      padding: 1rem;
      max-width: 900px;
      margin: auto;
    }
    .card {
      background-color: #1e293b;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 0.5rem;
      box-shadow: 0 0 8px rgba(0,0,0,0.3);
    }
    .task-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px solid #334155;
    }
    .task-item:last-child { border-bottom: none; }
    input[type="text"], input[type="number"], select {
      width: 100%;
      padding: 0.5rem;
      background: #0f172a;
      color: #f1f5f9;
      border: 1px solid #334155;
      border-radius: 0.25rem;
    }
    button {
      background: #22c55e;
      color: #fff;
      border: none;
      border-radius: 0.25rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover { background: #16a34a; }
    h2 { color: #22c55e; margin-top: 0; }
    label { display: block; margin-bottom: 0.25rem; }
    canvas {
      border: 1px solid #334155;
      border-radius: 0.5rem;
      width: 100%;
      height: 200px;
      background: #0f172a;
    }
  </style>
</head>
<body>
  <header>Putzliste – Darkmode</header>
  <main>
    <section class="card" id="todo-section">
      <h2>To-do / Putzliste</h2>
      <div id="task-list"></div>
      <input id="new-task" type="text" placeholder="Neue Aufgabe hinzufügen...">
      <button onclick="addTask()">Hinzufügen</button>
    </section>

    <section class="card">
      <h2>Fritteusen-Check</h2>
      <label>Temperatur (°C)</label>
      <input type="number" id="fritte-temp">
      <label>Ölstatus</label>
      <select id="fritte-status">
        <option value="F">F – Filtern</option>
        <option value="X">X – Neu befüllen</option>
      </select>
      <button onclick="saveFritte()">Speichern</button>
      <div id="fritte-output"></div>
    </section>

    <section class="card">
      <h2>Kühlhaus / Truhen-Temperatur</h2>
      <label>Temperatur (°C)</label>
      <input type="number" id="cool-temp">
      <button onclick="saveTemp()">Speichern</button>
      <div id="temp-output"></div>
    </section>

    <section class="card">
      <h2>Unterschrift</h2>
      <canvas id="signature"></canvas><br>
      <button onclick="clearSign()">Löschen</button>
      <button onclick="saveSign()">Speichern</button>
      <div id="sign-output"></div>
    </section>

    <section class="card">
      <h2>Admin-Bereich</h2>
      <p>Hier sieht der Administrator die gespeicherten Daten.</p>
      <button onclick="showData()">Gespeicherte Daten anzeigen</button>
      <pre id="admin-data"></pre>
    </section>
  </main>

  <script>
    // To-do Liste speichern
    let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
    const taskList = document.getElementById('task-list');
    function renderTasks(){
      taskList.innerHTML = '';
      tasks.forEach((task,i)=>{
        const div = document.createElement('div');
        div.className='task-item';
        div.innerHTML = \`<span>\${task.done ? '✅' : '⬜'} \${task.text}</span>
        <div>
          <button onclick="toggleTask(\${i})">Erledigt</button>
          <button onclick="deleteTask(\${i})">Löschen</button>
        </div>\`;
        taskList.appendChild(div);
      });
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }
    function addTask(){
      const input = document.getElementById('new-task');
      if(input.value.trim()){
        tasks.push({text: input.value.trim(), done: false});
        input.value='';
        renderTasks();
      }
    }
    function toggleTask(i){ tasks[i].done=!tasks[i].done; renderTasks(); }
    function deleteTask(i){ tasks.splice(i,1); renderTasks(); }
    renderTasks();

    // Fritteusen-Daten
    function saveFritte(){
      const temp=document.getElementById('fritte-temp').value;
      const status=document.getElementById('fritte-status').value;
      localStorage.setItem('fritte', JSON.stringify({temp,status,date:new Date().toLocaleString()}));
      document.getElementById('fritte-output').innerText = 'Gespeichert: '+temp+'°C, Status: '+status;
    }
    const fritteData = JSON.parse(localStorage.getItem('fritte')||'null');
    if(fritteData) document.getElementById('fritte-output').innerText = 'Letzter Eintrag: '+fritteData.temp+'°C, '+fritteData.status;

    // Kühlhaus-Daten
    function saveTemp(){
      const temp=document.getElementById('cool-temp').value;
      localStorage.setItem('cooltemp', JSON.stringify({temp,date:new Date().toLocaleString()}));
      document.getElementById('temp-output').innerText='Gespeichert: '+temp+'°C';
    }
    const coolData = JSON.parse(localStorage.getItem('cooltemp')||'null');
    if(coolData) document.getElementById('temp-output').innerText='Letzter Eintrag: '+coolData.temp+'°C';

    // Unterschrift
    const canvas=document.getElementById('signature');
    const ctx=canvas.getContext('2d');
    let drawing=false;
    canvas.addEventListener('mousedown',()=>drawing=true);
    canvas.addEventListener('mouseup',()=>drawing=false);
    canvas.addEventListener('mousemove',draw);
    function draw(e){
      if(!drawing)return;
      ctx.fillStyle='#22c55e';
      ctx.beginPath();
      ctx.arc(e.offsetX,e.offsetY,2,0,Math.PI*2);
      ctx.fill();
    }
    function clearSign(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      localStorage.removeItem('signature');
      document.getElementById('sign-output').innerText='';
    }
    function saveSign(){
      const data=canvas.toDataURL();
      localStorage.setItem('signature',data);
      document.getElementById('sign-output').innerText='Unterschrift gespeichert';
    }
    const savedSign=localStorage.getItem('signature');
    if(savedSign){
      const img=new Image();
      img.src=savedSign;
      img.onload=()=>ctx.drawImage(img,0,0);
    }

    // Adminbereich
    function showData(){
      const all={tasks,fritte:JSON.parse(localStorage.getItem('fritte')||'{}'),
                 cool:JSON.parse(localStorage.getItem('cooltemp')||'{}'),
                 sign:!!localStorage.getItem('signature')};
      document.getElementById('admin-data').innerText=JSON.stringify(all,null,2);
    }
  </script>
</body>
</html>
