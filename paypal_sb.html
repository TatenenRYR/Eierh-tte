<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>PayPal Sandbox Abo-Debug</title>
  <script src="https://www.paypal.com/sdk/js?client-id=sb&vault=true&intent=subscription"></script>
  <style>
    #log {
      background: #f0f0f0;
      font-family: monospace;
      padding: 10px;
      margin-top: 20px;
      border-radius: 8px;
      max-height: 200px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <h2>PayPal Abo-Debug Test</h2>
  <div id="paypal-button-container"></div>
  <div id="log"><b>Debug-Log:</b><br></div>

  <script>
    const log = (msg) => {
      document.getElementById('log').innerHTML += msg + '<br>';
    };

    log('üîÑ SDK geladen: ' + (window.paypal ? '‚úÖ' : '‚ùå'));

    paypal.Buttons({
      style: {
        shape: 'pill',
        color: 'blue',
        layout: 'horizontal',
        label: 'subscribe'
      },
      createSubscription: function(data, actions) {
        log('üì¶ Abo wird erstellt‚Ä¶');
        return actions.subscription.create({
          plan_id: 'P-5ML4271244454362WXNWU5NQ' // Dummy-Plan ID aus Sandbox
        });
      },
      onApprove: function(data, actions) {
        log('üéâ Abo erfolgreich! ID: ' + data.subscriptionID);
        alert('Abo abgeschlossen!');
      },
      onError: function(err) {
        log('‚ùå Fehler: ' + JSON.stringify(err));
      }
    }).render('#paypal-button-container');
  </script>
</body>
</html>
